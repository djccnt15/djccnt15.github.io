---
published: true
layout: post
title: '[Git] 04. 기타 활용팁'
description: >
    각종 유용한 명령어들: mv, rm, restore, reset
categories: [SWEngineering]
tags: [git]
image:
    path: /assets/img/posts/thumbnail_git.png
related_posts:
    - _posts/swengineering/2022-01-16-manual_git_03.md
    - _posts/swengineering/2022-11-08-manual_git_05.md
---
{% include series_git.html %}
* toc
{:toc}

> The information manager from Hell. - Linus Benedict Torvalds

## mv

파일 및 디렉토리를 옮기거나 이름을 바꾸는 명령어  

```powershell
# 파일 및 디렉토리를 이동
$ git mv <source> <destination>

# destination에 이미 파일이 있어도 강제로 이동
$ git mv -f <source> <destination>

# 충돌나는 경우를 제외하고 이동
$ git mv -k <source> <destination>

# dry-run을 통해 명령을 수행할 시 어떤 일이 일어날지 미리 보여줌
$ git mv -n <source> <destination>
```

## rm

파일을 워킹 트리와 인덱스에서 삭제하는 명령어  

```powershell
# 파일을 워킹 트리와 인덱스에서 삭제
$ git rm <pathspec>

# 파일을 원격 저장소에서만 삭제
$ git rm --cached <pathspec>

# 폴더를 원격 저장소에서만 삭제
$ git rm -r --cached <dir_name>
```

## restore

`git rm`으로 지운 파일을 되살리는 명령어  

```powershell
$ git restore <file_name>
```

💡 과거에는 `git checkout`이 `restore`와 `switch`을 합친 기능을 하는 명령어였고 옵션을 통해 제어했지만 현재는 쓰이지 않는다.  
{:.note}

## reset

현재의 **HEAD**를 특정 상태로 되돌린다.  

```powershell
# commit 취소 및 index 리셋, 변경된 파일들은 unstaged 상태로 워킹 디렉터리에 보존
$ git reset HEAD^
$ git reset --mixed HEAD^

# commit 취소, 변경된 파일들은 staged 상태로 워킹 디렉터리에 보존
$ git reset --soft HEAD^

# commit 취소, 파일들은 unstaged 상태로 워킹 디렉터리에서 삭제
$ git reset --hard HEAD^
```

❗ `git reset --hard`를 사용하면 모든 변경 내역이 삭제되고 마지막 commit으로 되돌려진다.
{:.note title='attention'}